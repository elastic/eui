# Flex

import { createDemo } from '@elastic/eui-docusaurus-theme/components';
import { FlexPreviewWrapper } from './flex_preview_wrapper';
import DemoNote from './_flex_preview_note.mdx';

export const FlexDemo = createDemo({ previewWrapper: FlexPreviewWrapper });

<DemoNote />

The Flex components provide a comprehensive layout system for creating responsive, flexible layouts. The system consists of three main components:

- **EuiFlexGroup** - For single row layouts and quick alignment
- **EuiFlexGrid** - For repeated wrapping rows of same-width items  
- **EuiFlexItem** - Direct child of both groups or grids

## EuiFlexGroup

**EuiFlexGroup** is useful for setting up layouts for a single row of content. By default, any **EuiFlexItem** within **EuiFlexGroup** will stretch and grow to match their siblings.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiSpacer } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup>
      <EuiFlexItem>Flex item</EuiFlexItem>
      <EuiFlexItem>
        <p>Another flex item</p>
        <EuiSpacer />
        <p>
          Note how both of these are the same width and height despite having
          different content?
        </p>
      </EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

### Responsive flex groups

**EuiFlexGroup** is responsive by default, stacking items vertically on smaller screens. If you need to disable this behavior (e.g. for groups only used for alignment and margins rather than layouts), apply the `responsive={false}` prop to retain a single row layout at all screen sizes.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiSpacer, EuiIcon } from '@elastic/eui';

  export default () => (
    <>
      <EuiFlexGroup alignItems="center">
        <EuiFlexItem grow={false}>
          <EuiIcon type="faceSad" />
        </EuiFlexItem>
        <EuiFlexItem grow={false}>
          On mobile, the icon will show above this text.
        </EuiFlexItem>
      </EuiFlexGroup>

      <EuiSpacer />

      <EuiFlexGroup responsive={false} alignItems="center">
        <EuiFlexItem grow={false}>
          <EuiIcon type="faceHappy" />
        </EuiFlexItem>
        <EuiFlexItem grow={false}>
          On mobile, the icon will stay to the left of this text.
        </EuiFlexItem>
      </EuiFlexGroup>
    </>
  );
  ```
</FlexDemo>

### Justify and align

**EuiFlexGroups** have the props `justifyContent` and `alignItems` that accept [normal flexbox parameters](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Aligning_Items_in_a_Flex_Container). Below are some common scenarios, where you need to separate two items, center justify a single one, or center an item vertically. Note the usage of **EuiFlexItems** with `grow=false` so that they do not stretch.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup justifyContent="spaceAround">
      <EuiFlexItem grow={false}>I&rsquo;m a single centered item!</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup justifyContent="spaceBetween">
      <EuiFlexItem grow={false}>One here on the left.</EuiFlexItem>
      <EuiFlexItem grow={false}>The other over here on the right.</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup justifyContent="spaceEvenly">
      <EuiFlexItem grow={false}>Spaced evenly between this one.</EuiFlexItem>
      <EuiFlexItem grow={false}>And this one here on the right.</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup alignItems="center">
      <EuiFlexItem grow={false}>
        <p>I</p>
        <p>am</p>
        <p>a</p>
        <p>tall</p>
        <p>item</p>
      </EuiFlexItem>
      <EuiFlexItem>I am vertically centered!</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

### Gutter sizing

The `gutterSize` prop can be applied to a parent **EuiFlexGroup** to adjust the spacing between child **EuiFlexItems**.

<FlexDemo>
  ```tsx
  import React, { Fragment } from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiSpacer } from '@elastic/eui';

  const gutterSizes = {
    'none': 'None',
    'xs': 'Extra small',
    's': 'Small',
    'm': 'Medium',
    'l': 'Large (default)',
    'xl': 'Extra large',
  } as const;

  export default () => (
    <>
      {Object.entries(gutterSizes).map(([gutterSize, text]) => (
        <Fragment key={gutterSize}>
          <EuiFlexGroup gutterSize={gutterSize}>
            <EuiFlexItem>{text}</EuiFlexItem>
            <EuiFlexItem>{text}</EuiFlexItem>
            <EuiFlexItem>{text}</EuiFlexItem>
            <EuiFlexItem>{text}</EuiFlexItem>
          </EuiFlexGroup>
          <EuiSpacer size="m" />
        </Fragment>
      ))}
    </>
  );
  ```
</FlexDemo>

### Allowing flex items to wrap

You can set `wrap` on **EuiFlexGroup** if it contains **EuiFlexItems** with minimum widths, which you want to wrap as the container becomes narrower.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup wrap>
      <EuiFlexItem style={{ minWidth: 300 }}>Min-width 300px</EuiFlexItem>

      <EuiFlexItem style={{ minWidth: 300 }}>Min-width 300px</EuiFlexItem>

      <EuiFlexItem style={{ minWidth: 300 }}>Min-width 300px</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

### Changing direction

You can change direction using the `direction` prop.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup direction="column">
      <EuiFlexItem>Flex item</EuiFlexItem>
      <EuiFlexItem>Another flex item</EuiFlexItem>
      <EuiFlexItem>Using the column direction</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

## EuiFlexGrid

**EuiFlexGrid** is a more rigid component, used for repeatable rows of same-width items. You can set a `columns` prop to specify anywhere between 1-4 columns. Any more would likely break on laptop screens.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGrid, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGrid columns={3}>
      <EuiFlexItem>One</EuiFlexItem>
      <EuiFlexItem>Two</EuiFlexItem>
      <EuiFlexItem>Three</EuiFlexItem>
      <EuiFlexItem>Four</EuiFlexItem>
      <EuiFlexItem>Five</EuiFlexItem>
      <EuiFlexItem>Six</EuiFlexItem>
      <EuiFlexItem>Seven</EuiFlexItem>
    </EuiFlexGrid>
  );
  ```
</FlexDemo>

### Responsive flex grids

**EuiFlexGrid** is responsive by default, stacking items vertically on smaller screens. Should you want to customize the number of items on small or large screens, apply the `responsive={false}` prop and then conditionally pass a column number based on the current breakpoint.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGrid, EuiFlexItem, useIsWithinBreakpoints } from '@elastic/eui';

  export default () => {
    const isMobile = useIsWithinBreakpoints(['xs', 's']);

    return (
      <EuiFlexGrid responsive={false} columns={isMobile ? 2 : 4}>
        <EuiFlexItem>One</EuiFlexItem>
        <EuiFlexItem>Two</EuiFlexItem>
        <EuiFlexItem>Three</EuiFlexItem>
        <EuiFlexItem>Four</EuiFlexItem>
        <EuiFlexItem>Five</EuiFlexItem>
        <EuiFlexItem>Six</EuiFlexItem>
      </EuiFlexGrid>
    );
  };
  ```
</FlexDemo>

### Align

Flex grids support vertically aligning children via the `alignItems` prop. Unlike flex groups, they do not support `justifyContent`, as grid columns are always evenly distributed.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGrid, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGrid columns={2} alignItems="center">
      <EuiFlexItem>I<br />am<br />a<br />tall<br />item</EuiFlexItem>
      <EuiFlexItem>I am vertically centered!</EuiFlexItem>
    </EuiFlexGrid>
  );
  ```
</FlexDemo>

### Gutter sizing

The `gutterSize` prop can be applied to a parent **EuiFlexGrid** to adjust the spacing between child **EuiFlexItems**.

<FlexDemo>
  ```tsx
  import React, { Fragment } from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiSpacer } from '@elastic/eui';

  const gutterSizes = {
    'none': 'None',
    'xs': 'Extra small',
    's': 'Small',
    'm': 'Medium',
    'l': 'Large (default)',
    'xl': 'Extra large',
  } as const;

  export default () => (
    <>
      {Object.entries(gutterSizes).map(([gutterSize, text]) => (
        <Fragment key={gutterSize}>
          <EuiFlexGrid columns={4} gutterSize={gutterSize}>
            <EuiFlexItem>{text}</EuiFlexItem>
            <EuiFlexItem>{text}</EuiFlexItem>
            <EuiFlexItem>{text}</EuiFlexItem>
            <EuiFlexItem>{text}</EuiFlexItem>
          </EuiFlexGrid>
          <EuiSpacer size="m" />
        </Fragment>
      ))}
    </>
  );
  ```
</FlexDemo>

### Changing direction

Adding `direction="column"` will re-orient the flex items so they display top-down **then** left to right.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGrid, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGrid columns={2} direction="column">
      <EuiFlexItem>One</EuiFlexItem>
      <EuiFlexItem>Two</EuiFlexItem>
      <EuiFlexItem>Three</EuiFlexItem>
      <EuiFlexItem>Four</EuiFlexItem>
      <EuiFlexItem>Five</EuiFlexItem>
      <EuiFlexItem>Six</EuiFlexItem>
      <EuiFlexItem>Seven</EuiFlexItem>
    </EuiFlexGrid>
  );
  ```
</FlexDemo>

## EuiFlexItem

:::warning
To work correctly, **EuiFlexItem** must be a **direct child** of **EuiFlexGroup** or **EuiFlexGrid**. You cannot have any intermediate HTML wrappers between them.
:::

### Flex items are also flex

To allow for continued stretching of nested flex groups/grids and their items, each **EuiFlexItem** also has the property of `display: flex`.

This can sometimes cause unwanted layouts of your content when there are multiple elements, or if the element itself also has some specific `display` property. To alleviate this, the simplest method is to wrap your inner children with a HTML wrapper like a `<div />` or `<span />`.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiButton } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup>
      <EuiFlexItem>
        <EuiButton fill>Buttons will widen</EuiButton>
      </EuiFlexItem>
      <EuiFlexItem>
        <div>
          <EuiButton fill>Unless you wrap them</EuiButton>
        </div>
      </EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

Alternatively, you can sometimes opt to omit **EuiFlexItem** completely.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiButton } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup justifyContent="spaceBetween" alignItems="center">
      <EuiPanel grow={false}>
        Flex group parents will still <br /> align children as usual
      </EuiPanel>
      <EuiButton fill>Look ma, no EuiFlexItem</EuiButton>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

### Panels grow vertically to fill flex items

The **EuiPanel** component will naturally grow to fill the **EuiFlexItem** which contains it.

```tsx interactive
import React from 'react';
import {
  EuiFlexItem,
  EuiFlexGroup,
  EuiPanel,
  EuiCode,
  EuiText,
} from '@elastic/eui';

export default () => (
  <EuiFlexGroup>
    <EuiFlexItem>
      <EuiText>
        <p>
          <EuiCode>FlexItem</EuiCode>
        </p>
        <p>A side nav might be in this one.</p>
        <p>And you would want the panel on the right to expand with it.</p>
      </EuiText>
    </EuiFlexItem>

    <EuiFlexItem>
      <EuiPanel>
        <strong>EuiPanel</strong>
      </EuiPanel>
    </EuiFlexItem>

    <EuiFlexItem>
      <EuiPanel grow={false}>
        Another <strong>EuiPanel</strong>, with{' '}
        <EuiCode>grow=&#123;false&#125;</EuiCode>.
      </EuiPanel>
    </EuiFlexItem>
  </EuiFlexGroup>
);
```

### Grow

:::warning
The `grow` prop of **EuiFlexItem** only applies when used within **EuiFlexGroup**. It is ignored by **EuiFlexGrid**, which enforces the same width for each item.
:::

### Turning off item stretching

By default, all **EuiFlexItems** will grow horizontally within their flex group if the `grow` prop is not specified. This can be turned off for each item individually via `grow={false}`.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup>
      <EuiFlexItem grow={false}>This item won&rsquo;t grow</EuiFlexItem>
      <EuiFlexItem>But this item will.</EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

### Proportional widths of items

Alternatively, you can specify a `grow` number between 1 and 10 for each **EuiFlexItem** to take up a proportional percentage of the **EuiFlexGroup** it is in.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem, EuiSpacer } from '@elastic/eui';

  export default () => (
    <div>
      <EuiFlexGroup>
        <EuiFlexItem grow={1}>1</EuiFlexItem>
        <EuiFlexItem grow={2}>
          2<br />
          wraps content if necessary
        </EuiFlexItem>
        <EuiFlexItem grow={3}>
          3<br />
          expands_to_fit_if_content_cannot_wrap
        </EuiFlexItem>
        <EuiFlexItem grow={4}>4</EuiFlexItem>
      </EuiFlexGroup>

      <EuiSpacer />

      <EuiFlexGroup>
        <EuiFlexItem grow={6}>6</EuiFlexItem>
        <EuiFlexItem grow={3}>3</EuiFlexItem>
        <EuiFlexItem grow={1}>1</EuiFlexItem>
        <EuiFlexItem grow={3}>3</EuiFlexItem>
        <EuiFlexItem grow={6}>6</EuiFlexItem>
      </EuiFlexGroup>
    </div>
  );
  ```
</FlexDemo>

## Shared behavior

### Nesting flex layouts

**EuiFlexGroup** and **EuiFlexGrid** can nest within themselves indefinitely. For example, here we turn off the growth on a **EuiFlexGroup**, then nest a grid inside of it.

:::warning Flex items are also a flexbox

To support nested stretching of items, **EuiFlexItem** also has `display: flex` on it. If your children are not behaving correctly, consider using one of these [flex item workarounds](#flex-items-are-also-flex).

:::

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGrid, EuiFlexGroup, EuiFlexItem, EuiSpacer } from '@elastic/eui';

  export default () => (
    <>
      <EuiFlexGroup>
        <EuiFlexItem grow={false}>
          <div>Flex Group</div>
          <EuiSpacer />
          <EuiFlexGroup>
            <EuiFlexItem>Nested Group One</EuiFlexItem>
            <EuiFlexItem>Nested Group Two</EuiFlexItem>
          </EuiFlexGroup>
        </EuiFlexItem>
        <EuiFlexItem grow={false}>
          <div>Flex Grid</div>
          <EuiSpacer />
          <EuiFlexGrid columns={3}>
            <EuiFlexItem>Nested Grid One</EuiFlexItem>
            <EuiFlexItem>Nested Grid Two</EuiFlexItem>
            <EuiFlexItem>Nested Grid Three</EuiFlexItem>
            <EuiFlexItem>Nested Grid Four</EuiFlexItem>
          </EuiFlexGrid>
        </EuiFlexItem>
      </EuiFlexGroup>
    </>
  );
  ```
</FlexDemo>

### Overriding output component type

The `component` prop can be passed to either the parent **EuiFlexGroup** or **EuiFlexGrid**, or the child **EuiFlexItem**, to change the rendered component type from the default `div`. It can be any valid React component type like a tag name string such as `div`or `span` or a React component.

This allows you to use semantic tags such as `<form>` with flex layouts, or obey rules around nesting block elements within inline elements.

<FlexDemo>
  ```tsx
  import React from 'react';
  import { EuiFlexGroup, EuiFlexItem } from '@elastic/eui';

  export default () => (
    <EuiFlexGroup component="p">
      <EuiFlexItem component="span">
        These items are nested within a paragraph tag
      </EuiFlexItem>

      <EuiFlexItem component="span">
        So they use inline span tags to avoid HTML validation issues
      </EuiFlexItem>
    </EuiFlexGroup>
  );
  ```
</FlexDemo>

## Props

import docgen from '@elastic/eui-docgen/dist/components/flex';

<PropTable definition={docgen.EuiFlexGroup} />
<PropTable definition={docgen.EuiFlexItem} />
<PropTable definition={docgen.EuiFlexGrid} />
