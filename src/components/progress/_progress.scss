// This file uses uncommon vendor prefixes not covered by our compilers
// sass-lint:disable no-vendor-prefixes

// Progress bars come in different sizes.
$euiProgressSizes: (
  xs: $euiSizeXS / 2,
  s: $euiSizeXS,
  m: $euiSizeS,
  l: $euiSize,
);

@each $name, $size in $euiProgressSizes {
  .euiProgress--#{$name} {
    height: $size;
  }
}

// Progress bars can be set to fixed or absolute.
.euiProgress--fixed {
  position: fixed;
  z-index: $euiZHeader + 1;
}

.euiProgress--absolute {
  position: absolute;
}

.euiProgress--fixed,
.euiProgress--absolute {
  top: 0;
  left: 0;
  right: 0;
  background-color: transparent;

  &.euiProgress--native {
    &::-webkit-progress-bar {
      background-color: transparent;
    }

    &::-moz-progress-bar {
      background-color: transparent;
    }
  }
}

@each $name, $color in $euiProgressColors {
  .euiProgress--#{$name} {
    &.euiProgress--native {
      &::-webkit-progress-value {
        background-color: $color;
      }

      &::-moz-progress-bar {
        background-color: $color;
      }
    }

    &.euiProgress--indeterminate {
      &:before {
        background-color: $color;
      }
    }
  }

  @if ($name != 'customColor') {
    .euiProgress__data--#{$name} {
      .euiProgress__valueText {
        color: makeHighContrastColor($color);
      }
    }
  }
}

.euiProgress__data {
  display: flex;
  justify-content: space-between;
}

.euiProgress__label,
.euiProgress__valueText {
  @include euiText;
  @include euiFontSizeXS;
  @include euiTextTruncate;
}

.euiProgress__label {
  flex-grow: 1;

  // Only restrict the valueText if it's the sibling of the label
  // Gives width precedence to the value text forcing consumers to round their values
  + .euiProgress__valueText {
    padding-left: $euiSizeXS;
    flex-grow: 1;
    text-align: right;
    flex-shrink: 0;
  }
}

.euiProgress__valueText {
  // Tabular numbers ensure the line up nicely when right-aligned
  font-feature-settings: 'tnum' 1;
  margin-left: auto;
}

.euiProgress__data--l {
  .euiProgress__label,
  .euiProgress__valueText {
    @include euiFontSizeS;
  }
}
